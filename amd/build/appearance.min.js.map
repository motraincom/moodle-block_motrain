{"version":3,"file":"appearance.min.js","sources":["../src/appearance.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Appearance.\n *\n * @copyright  2019 Mootivation Technologies Corp.\n * @author     Frédéric Massart <fred@branchup.tech>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n define(['core/log'], function(log) {\n\n    var wasSetup = false;\n\n    // Should contain all the values we may be using.\n    var appearance = {\n        thousandsep: ',',\n        pointsimageurl: M.util.image_url('coins', 'block_motrain'),\n    };\n\n    /**\n     * Format coins.\n     *\n     * @param {Number} amount The amount.\n     * @return {String}\n     */\n    function formatCoins(amount) {\n        if (!wasSetup) {\n            log.warn('The appearance was not setup, make sure you used \\'get_appearance_page_requirements\\'.');\n        }\n\n        var coins = amount;\n        var thousandsep = appearance.thousandsep;\n\n        // Credit: https://stackoverflow.com/a/2901298/867720\n        return coins.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, thousandsep);\n    }\n\n    /**\n     * Setup.\n     *\n     * @param {Object} appearanceSettings The settings.\n     */\n    function setup(appearanceSettings) {\n        appearance = Object.assign({}, appearance, appearanceSettings);\n        wasSetup = true;\n    }\n\n    return {\n        formatCoins: formatCoins,\n        getSettings: function() {\n            return appearance;\n        },\n        setup: setup,\n    };\n});\n"],"names":["define","log","wasSetup","appearance","thousandsep","pointsimageurl","M","util","image_url","formatCoins","amount","warn","coins","toString","replace","getSettings","setup","appearanceSettings","Object","assign"],"mappings":";;;;;;;AAuBCA,kCAAO,CAAC,aAAa,SAASC,SAEvBC,UAAW,EAGXC,WAAa,CACbC,YAAa,IACbC,eAAgBC,EAAEC,KAAKC,UAAU,QAAS,wBA+BvC,CACHC,qBAvBiBC,QACZR,UACDD,IAAIU,KAAK,4FAGTC,MAAQF,OACRN,YAAcD,WAAWC,mBAGtBQ,MAAMC,WAAWC,QAAQ,wBAAyBV,cAezDW,YAAa,kBACFZ,YAEXa,eAVWC,oBACXd,WAAae,OAAOC,OAAO,GAAIhB,WAAYc,oBAC3Cf,UAAW"}